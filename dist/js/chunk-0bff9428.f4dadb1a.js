(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bff9428"],{"175d":function(t,e,a){"use strict";var i=a("8b99"),o=a.n(i);o.a},"19b4":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fancy_textarea"},[a("div",{staticClass:"fancy_textarea__container",staticStyle:{position:"relative",display:"inline-block"},style:{width:t.width||"20rem"}},[a("div",{staticClass:"fancy_textarea__placeholder",class:{"fancy_textarea__placeholder--active":t.active||t.value.length}},[t._v(" "+t._s(t.placeholder)+" ")]),a("textarea",{staticClass:"input fancy_textarea__textarea",domProps:{value:t.value},on:{input:function(e){return t.updateValue(e.target.value)},focus:t.addActive,blur:t.removeActive}})]),a("error-tooltip",{attrs:{error:t.error}})],1)},o=[],n=a("e145"),r={name:"FancyTextarea",props:["value","placeholder","width","error"],components:{ErrorTooltip:n["a"]},data:function(){return{active:!1}},methods:{updateValue:function(t){this.$emit("input",t)},addActive:function(){this.active=!0},removeActive:function(){this.active=!1}}},s=r,c=(a("175d"),a("2877")),l=Object(c["a"])(s,i,o,!1,null,"133c8d9c",null);e["a"]=l.exports},"1bfa":function(t,e,a){},"225f":function(t,e,a){"use strict";var i=a("63a4"),o=a.n(i);o.a},"2fa3":function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var i="";i="https://math4school.herokuapp.com";var o=i},"466d":function(t,e,a){"use strict";var i=a("d784"),o=a("825a"),n=a("50c4"),r=a("1d80"),s=a("8aa5"),c=a("14c3");i("match",1,(function(t,e,a){return[function(e){var a=r(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,a):new RegExp(e)[t](String(a))},function(t){var i=a(e,t,this);if(i.done)return i.value;var r=o(t),l=String(this);if(!r.global)return c(r,l);var u=r.unicode;r.lastIndex=0;var d,p=[],f=0;while(null!==(d=c(r,l))){var v=String(d[0]);p[f]=v,""===v&&(r.lastIndex=s(l,n(r.lastIndex),u)),f++}return 0===f?null:p}]}))},4795:function(t,e,a){var i=a("23e7"),o=a("da84"),n=a("342f"),r=[].slice,s=/MSIE .\./.test(n),c=function(t){return function(e,a){var i=arguments.length>2,o=i?r.call(arguments,2):void 0;return t(i?function(){("function"==typeof e?e:Function(e)).apply(this,o)}:e,a)}};i({global:!0,bind:!0,forced:s},{setTimeout:c(o.setTimeout),setInterval:c(o.setInterval)})},"4e07":function(t,e,a){},5326:function(t,e,a){},6307:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal_window__overlay",class:{"modal_window--show":t.value},on:{click:function(e){return e.target!==e.currentTarget?null:t.closeModal(e)}}},[a("div",{staticClass:"modal_window",class:{"modal_window--show":t.value},style:{width:t.width||"20rem"}},[a("div",{staticClass:"modal_window__loading_overlay",class:{"modal_window__loading_overlay--show":t.loading}},[a("loading-icon")],1),t.closeButton?a("span",{staticClass:"modal_window__close",on:{click:t.closeModal}},[a("font-awesome-icon",{attrs:{icon:["fa","times"]}})],1):t._e(),a("div",{staticClass:"modal_window__main",class:{"modal_window__main--no_padding":t.noPadding}},[t._t("main")],2),t.hideFooter?t._e():a("div",{staticClass:"modal_window__footer"},[t._t("footer")],2)])])},o=[],n=a("c5af"),r={name:"ModalWindow",props:["value","width","close-button","hide-footer","no-padding","loading"],components:{LoadingIcon:n["a"]},methods:{closeModal:function(){this.$emit("input",!1)}}},s=r,c=(a("f83a"),a("2877")),l=Object(c["a"])(s,i,o,!1,null,"32ecccd0",null);e["a"]=l.exports},"63a4":function(t,e,a){},"7da2":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"route_container"},[a("confirm-modal",{attrs:{color:"red",text:"Да, удалить"},on:{confirm:t.removeProfilePicture},model:{value:t.picture.showRemoveProfilePictureModal,callback:function(e){t.$set(t.picture,"showRemoveProfilePictureModal",e)},expression:"picture.showRemoveProfilePictureModal"}},[t._v(" Вы уверены, что хотите удалить фотографию в профиле? ")]),a("modal-window",{attrs:{loading:t.picture.loading,width:"25rem"},on:{input:t.hideProflePictureModal},model:{value:t.picture.showProfilePictureModal,callback:function(e){t.$set(t.picture,"showProfilePictureModal",e)},expression:"picture.showProfilePictureModal"}},[a("div",{staticClass:"profile_picture_modal",class:{"profile_picture_modal--picture.dragging":t.picture.dragging},attrs:{slot:"main"},on:{dragover:t.handleDragOver,drkagend:function(e){t.picture.dragging=!1},drkgleave:function(e){t.picture.dragging=!1},drop:t.handleFileDrop},slot:"main"},[a("div",{staticClass:"h3"},[t._v("Добавление изображение профиля")]),a("p",{staticClass:"p--condensed"},[t._v(" Перетащите изображение или "),a("label",{staticClass:"button profile_picture_modal__upload_button"},[a("input",{attrs:{type:"file",accept:"image/*"},on:{change:function(e){return t.processImage(e.target.files[0])}}}),t._v(" Загрузите файл ")])]),a("div",{staticClass:"profile_picture_modal__drag_area"},[t.picture.dataURL?a("div",{staticClass:"profile_picture_modal__drag_area__image picture_circle",style:{"background-image":"url("+t.picture.dataURL+")"}}):a("span",{staticClass:"profile_picture_modal__drag_area__icon",class:{"profile_picture_modal__drag_area__icon--picture.dragging":t.picture.dragging}},[a("font-awesome-icon",{attrs:{icon:["fa","cloud-upload-alt"]}})],1)])]),a("div",{staticClass:"profile_picture_modal__buttons",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"button button--modal button--green",class:{"button--disabled":!t.picture.dataURL},on:{click:t.uploadProfilePicture}},[t._v(" Загрузить изображение ")]),a("button",{staticClass:"button button--modal",on:{click:t.hideProflePictureModal}},[t._v("Отмена")])])]),a("div",{staticClass:"h1"},[t._v("Основные настройки")]),a("div",[a("div",{staticClass:"h3"},[t._v("Информация")]),a("p",{staticClass:"p--condensed"},[t._v(" Напишите что-нибудь о себе ")]),a("fancy-textarea",{attrs:{placeholder:"About me description",error:t.description.error,type:"password"},model:{value:t.description.value,callback:function(e){t.$set(t.description,"value",e)},expression:"description.value"}}),a("loading-button",{staticClass:"button button--green",attrs:{loading:t.description.loading},on:{click:t.saveDescription}},[t._v(" Сохранить описание ")])],1),a("div",[a("div",{staticClass:"h3"},[t._v("Изображение профиля")]),a("p",{staticClass:"p--condensed"},[t._v(" Это будет отображаться в вашем профиле ")]),t.picture.current?a("p",{staticClass:"p--condensed profile_picture_preview picture_circle",style:{"background-image":"url("+t.picture.current+")"}}):t._e(),a("button",{staticClass:"button",on:{click:function(e){t.picture.showProfilePictureModal=!0}}},[t._v(" "+t._s(t.picture.current?"Изменить":"Добавить")+" изображение профиля ")]),t.picture.current?a("button",{staticClass:"button",staticStyle:{"margin-left":"0.5rem"},on:{click:function(e){t.picture.showRemoveProfilePictureModal=!0}}},[t._v(" Удалить ")]):t._e()])],1)},o=[],n=(a("a4d3"),a("e01a"),a("ac1f"),a("466d"),a("4795"),a("19b4")),r=a("8e8d"),s=a("6307"),c=a("da16"),l=a("c4b0"),u=a.n(l),d=a("bd28"),p=a("2fa3"),f={name:"settingsGeneral",components:{FancyTextarea:n["a"],LoadingButton:r["a"],ModalWindow:s["a"],ConfirmModal:c["a"]},data:function(){return{description:{value:"",loading:!1,error:""},picture:{current:null,showProfilePictureModal:!1,showRemoveProfilePictureModal:!1,dragging:!1,dataURL:null,file:null,loading:!1}}},computed:{},methods:{saveDescription:function(){var t=this;this.description.error="",this.description.loading=!0,this.axios.put(p["a"]+"/api/v1/user/"+this.$store.state.username,{description:this.description.value}).then((function(){t.description.loading=!1}))["catch"]((function(e){t.description.loading=!1,u()(t.$store)(e,(function(e){t.description.error=e.message}))}))},uploadProfilePicture:function(){var t=this;this.picture.loading=!0;var e=new FormData;e.append("picture",this.picture.file),this.axios.post(p["a"]+"/api/v1/user/"+this.$store.state.username+"/picture",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.hideProflePictureModal(),t.picture.current=e.data.picture}))["catch"]((function(e){t.picture.loading=!1,u()(t.$store)(e)}))},removeProfilePicture:function(){var t=this;this.axios["delete"](p["a"]+"/api/v1/user/"+this.$store.state.username+"/picture").then((function(){t.picture.current=null}))["catch"](u()(this.$store))},hideProflePictureModal:function(){var t=this;this.picture.showProfilePictureModal=!1,setTimeout((function(){t.picture.dataURL=null,t.picture.loading=!1}),200)},handleDragOver:function(t){t.preventDefault(),this.picture.dragging=!0},handleFileDrop:function(t){if(t.preventDefault(),this.picture.dragging=!1,t.dataTransfer&&t.dataTransfer.items){var e=t.dataTransfer.items[0];e.type.match("^image/")&&this.processImage(e.getAsFile())}},processImage:function(t){var e=this,a=new FileReader;a.readAsDataURL(t),this.picture.file=t,a.addEventListener("load",(function(){e.picture.dataURL=a.result}))}},created:function(){var t=this;this.$store.dispatch("setTitle","general settings"),this.$nextTick((function(){t.axios.get(p["a"]+"/api/v1/user/"+t.$store.state.username).then((function(e){t.description.value=e.data.description||"",t.picture.current=e.data.picture}))["catch"]((function(e){u()(t.$store)(e)}))})),Object(d["a"])("settingsGeneral")}},v=f,_=(a("d128"),a("2877")),h=Object(_["a"])(v,i,o,!1,null,"be998976",null);e["default"]=h.exports},"8b99":function(t,e,a){},"8df7":function(t,e,a){"use strict";var i=a("4e07"),o=a.n(i);o.a},"8e8d":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"button loading_button",class:{"loading_button--loading":t.loading},on:{click:function(e){return t.event("click")},keydown:function(e){return t.event("keydown")}}},[a("loading-icon",{staticClass:"loading_button__icon",attrs:{dark:t.dark}}),a("div",{staticClass:"loading_button__slot"},[t._t("default")],2)],1)},o=[],n=a("c5af"),r={name:"LoadingButton",props:["loading","dark"],components:{LoadingIcon:n["a"]},methods:{event:function(t){this.loading||this.$emit(t)}}},s=r,c=(a("8df7"),a("2877")),l=Object(c["a"])(s,i,o,!1,null,null,null);e["a"]=l.exports},9832:function(t,e,a){"use strict";var i=a("5326"),o=a.n(i);o.a},b9dc:function(t,e,a){},bd28:function(t,e,a){"use strict";var i=a("bc3a"),o=a.n(i);e["a"]=function(t,e){"userPosts"===t||"userThreads"===t?o.a.get("/api/v1/user/"+e).then((function(e){return o.a.post("/api/v1/log",{route:t,resourceId:e.data.id})})):o.a.post("/api/v1/log",{route:t,resourceId:e})}},c5af:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loading_icon",class:{"loading_icon--dark":t.dark}},[a("span"),a("span"),a("span")])},o=[],n={name:"LoadingIcon",props:["dark"]},r=n,s=(a("9832"),a("2877")),c=Object(s["a"])(r,i,o,!1,null,null,null);e["a"]=c.exports},d128:function(t,e,a){"use strict";var i=a("1bfa"),o=a.n(i);o.a},da16:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal-window",{attrs:{value:t.showModal},on:{input:t.setShowModal}},[a("div",{staticStyle:{"padding-top":"1rem"},attrs:{slot:"main"},slot:"main"},[t._t("default")],2),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"button button--modal",class:t.buttonColor,on:{click:t.confirm}},[t._v(t._s(t.text||"OK"))]),a("button",{staticClass:"button button--modal",on:{click:function(e){return t.setShowModal(!1)}}},[t._v("Отмена")])])])},o=[],n=a("6307"),r={name:"ConfirmModal",props:["value","color","text"],components:{ModalWindow:n["a"]},data:function(){return{showModal:!1}},computed:{buttonColor:function(){return this.color?"button--"+this.color:""}},watch:{value:function(t){this.showModal=t}},methods:{setShowModal:function(t){this.showModal=t,this.$emit("input",t)},confirm:function(){this.$emit("confirm"),this.setShowModal(!1)}},mounted:function(){this.setShowModal(this.value)}},s=r,c=a("2877"),l=Object(c["a"])(s,i,o,!1,null,null,null);e["a"]=l.exports},e145:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"error_tooltip",class:{"error_tooltip--show":t.error}},[t._v(" "+t._s(t.delayed_error)+" ")])},o=[],n=(a("4795"),{name:"ErrorTooltip",props:["error"],data:function(){return{delayed_error:this.error}},watch:{error:function(t){var e=this;t?this.delayed_error=t:setTimeout((function(){e.delayed_error=""}),205)}}}),r=n,s=(a("225f"),a("2877")),c=Object(s["a"])(r,i,o,!1,null,"6281f96c",null);e["a"]=c.exports},f83a:function(t,e,a){"use strict";var i=a("b9dc"),o=a.n(i);o.a}}]);
//# sourceMappingURL=chunk-0bff9428.f4dadb1a.js.map