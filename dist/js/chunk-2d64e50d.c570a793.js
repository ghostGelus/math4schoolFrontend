(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d64e50d"],{"225f":function(t,e,n){"use strict";var o=n("63a4"),r=n.n(o);r.a},4795:function(t,e,n){var o=n("23e7"),r=n("da84"),i=n("342f"),s=[].slice,a=/MSIE .\./.test(i),l=function(t){return function(e,n){var o=arguments.length>2,r=o?s.call(arguments,2):void 0;return t(o?function(){("function"==typeof e?e:Function(e)).apply(this,r)}:e,n)}};o({global:!0,bind:!0,forced:a},{setTimeout:l(r.setTimeout),setInterval:l(r.setInterval)})},"4e07":function(t,e,n){},5326:function(t,e,n){},6062:function(t,e,n){"use strict";var o=n("6d61"),r=n("6566");t.exports=o("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r)},6307:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal_window__overlay",class:{"modal_window--show":t.value},on:{click:function(e){return e.target!==e.currentTarget?null:t.closeModal(e)}}},[n("div",{staticClass:"modal_window",class:{"modal_window--show":t.value},style:{width:t.width||"20rem"}},[n("div",{staticClass:"modal_window__loading_overlay",class:{"modal_window__loading_overlay--show":t.loading}},[n("loading-icon")],1),t.closeButton?n("span",{staticClass:"modal_window__close",on:{click:t.closeModal}},[n("font-awesome-icon",{attrs:{icon:["fa","times"]}})],1):t._e(),n("div",{staticClass:"modal_window__main",class:{"modal_window__main--no_padding":t.noPadding}},[t._t("main")],2),t.hideFooter?t._e():n("div",{staticClass:"modal_window__footer"},[t._t("footer")],2)])])},r=[],i=n("c5af"),s={name:"ModalWindow",props:["value","width","close-button","hide-footer","no-padding","loading"],components:{LoadingIcon:i["a"]},methods:{closeModal:function(){this.$emit("input",!1)}}},a=s,l=(n("f83a"),n("2877")),c=Object(l["a"])(a,o,r,!1,null,"32ecccd0",null);e["a"]=c.exports},"63a4":function(t,e,n){},6566:function(t,e,n){"use strict";var o=n("9bf2").f,r=n("7c73"),i=n("e2cc"),s=n("0366"),a=n("19aa"),l=n("2266"),c=n("7dd0"),u=n("2626"),d=n("83ab"),f=n("f183").fastKey,p=n("69f3"),h=p.set,v=p.getterFor;t.exports={getConstructor:function(t,e,n,c){var u=t((function(t,o){a(t,u,e),h(t,{type:e,index:r(null),first:void 0,last:void 0,size:0}),d||(t.size=0),void 0!=o&&l(o,t[c],t,n)})),p=v(e),_=function(t,e,n){var o,r,i=p(t),s=m(t,e);return s?s.value=n:(i.last=s={index:r=f(e,!0),key:e,value:n,previous:o=i.last,next:void 0,removed:!1},i.first||(i.first=s),o&&(o.next=s),d?i.size++:t.size++,"F"!==r&&(i.index[r]=s)),t},m=function(t,e){var n,o=p(t),r=f(e);if("F"!==r)return o.index[r];for(n=o.first;n;n=n.next)if(n.key==e)return n};return i(u.prototype,{clear:function(){var t=this,e=p(t),n=e.index,o=e.first;while(o)o.removed=!0,o.previous&&(o.previous=o.previous.next=void 0),delete n[o.index],o=o.next;e.first=e.last=void 0,d?e.size=0:t.size=0},delete:function(t){var e=this,n=p(e),o=m(e,t);if(o){var r=o.next,i=o.previous;delete n.index[o.index],o.removed=!0,i&&(i.next=r),r&&(r.previous=i),n.first==o&&(n.first=r),n.last==o&&(n.last=i),d?n.size--:e.size--}return!!o},forEach:function(t){var e,n=p(this),o=s(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:n.first){o(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!m(this,t)}}),i(u.prototype,n?{get:function(t){var e=m(this,t);return e&&e.value},set:function(t,e){return _(this,0===t?0:t,e)}}:{add:function(t){return _(this,t=0===t?0:t,t)}}),d&&o(u.prototype,"size",{get:function(){return p(this).size}}),u},setStrong:function(t,e,n){var o=e+" Iterator",r=v(e),i=v(o);c(t,e,(function(t,e){h(this,{type:o,target:t,state:r(t),kind:e,last:void 0})}),(function(){var t=i(this),e=t.kind,n=t.last;while(n&&n.removed)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),u(e)}}},"6d61":function(t,e,n){"use strict";var o=n("23e7"),r=n("da84"),i=n("94ca"),s=n("6eeb"),a=n("f183"),l=n("2266"),c=n("19aa"),u=n("861d"),d=n("d039"),f=n("1c7e"),p=n("d44e"),h=n("7156");t.exports=function(t,e,n){var v=-1!==t.indexOf("Map"),_=-1!==t.indexOf("Weak"),m=v?"set":"add",w=r[t],g=w&&w.prototype,b=w,y={},x=function(t){var e=g[t];s(g,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(_&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return _&&!u(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(_&&!u(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(i(t,"function"!=typeof w||!(_||g.forEach&&!d((function(){(new w).entries().next()})))))b=n.getConstructor(e,t,v,m),a.REQUIRED=!0;else if(i(t,!0)){var C=new b,k=C[m](_?{}:-0,1)!=C,A=d((function(){C.has(1)})),P=f((function(t){new w(t)})),E=!_&&d((function(){var t=new w,e=5;while(e--)t[m](e,e);return!t.has(-0)}));P||(b=e((function(e,n){c(e,b,t);var o=h(new w,e,b);return void 0!=n&&l(n,o[m],o,v),o})),b.prototype=g,g.constructor=b),(A||E)&&(x("delete"),x("has"),v&&x("get")),(E||k)&&x(m),_&&g.clear&&delete g.clear}return y[t]=b,o({global:!0,forced:b!=w},y),p(b,t),_||n.setStrong(b,t,v),b}},"80e3":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fancy_input",style:{width:t.width||"auto"}},[n("div",{staticStyle:{position:"relative",display:"inline-block"}},[n("div",{staticClass:"fancy_input__placeholder",class:{"fancy_input__placeholder--active":t.active||t.value.length,"fancy_input__placeholder--large":t.large}},[t._v(" "+t._s(t.placeholder)+" ")]),n("input",{staticClass:"fancy_input__input input",class:{"fancy_input__input--large":t.large,"fancy_input__input--error":t.error},attrs:{type:t.type||"text"},domProps:{value:t.value},on:{input:function(e){return t.updateValue(e.target.value)},focus:t.addActive,blur:t.removeActive}})]),n("error-tooltip",{attrs:{error:t.error}})],1)},r=[],i=n("e145"),s={name:"FancyInput",props:["value","placeholder","width","type","error","large"],components:{ErrorTooltip:i["a"]},data:function(){return{active:!1}},methods:{updateValue:function(t){this.$emit("input",t)},addActive:function(){this.active=!0},removeActive:function(){this.active=!1}}},a=s,l=(n("9946"),n("2877")),c=Object(l["a"])(a,o,r,!1,null,"e8a0c810",null);e["a"]=c.exports},"8df7":function(t,e,n){"use strict";var o=n("4e07"),r=n.n(o);r.a},"8e8d":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"button loading_button",class:{"loading_button--loading":t.loading},on:{click:function(e){return t.event("click")},keydown:function(e){return t.event("keydown")}}},[n("loading-icon",{staticClass:"loading_button__icon",attrs:{dark:t.dark}}),n("div",{staticClass:"loading_button__slot"},[t._t("default")],2)],1)},r=[],i=n("c5af"),s={name:"LoadingButton",props:["loading","dark"],components:{LoadingIcon:i["a"]},methods:{event:function(t){this.loading||this.$emit(t)}}},a=s,l=(n("8df7"),n("2877")),c=Object(l["a"])(a,o,r,!1,null,null,null);e["a"]=c.exports},9832:function(t,e,n){"use strict";var o=n("5326"),r=n.n(o);r.a},9946:function(t,e,n){"use strict";var o=n("bcc7"),r=n.n(o);r.a},abf8:function(t,e,n){},b9dc:function(t,e,n){},bb2f:function(t,e,n){var o=n("d039");t.exports=!o((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bcc7:function(t,e,n){},c5af:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loading_icon",class:{"loading_icon--dark":t.dark}},[n("span"),n("span"),n("span")])},r=[],i={name:"LoadingIcon",props:["dark"]},s=i,a=(n("9832"),n("2877")),l=Object(a["a"])(s,o,r,!1,null,null,null);e["a"]=l.exports},e145:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"error_tooltip",class:{"error_tooltip--show":t.error}},[t._v(" "+t._s(t.delayed_error)+" ")])},r=[],i=(n("4795"),{name:"ErrorTooltip",props:["error"],data:function(){return{delayed_error:this.error}},watch:{error:function(t){var e=this;t?this.delayed_error=t:setTimeout((function(){e.delayed_error=""}),205)}}}),s=i,a=(n("225f"),n("2877")),l=Object(a["a"])(s,o,r,!1,null,"6281f96c",null);e["a"]=l.exports},e3ed:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"route_container thread_new"},[n("div",{staticClass:"h1"},[t._v("Post new thread")]),n("div",{staticClass:"thread_meta_info"},[n("div",{staticClass:"thread_meta_info__text"},[t._v("Enter the thread title and the category to post it in")]),n("div",{staticClass:"thread_meta_info__form"},[n("select-button",{attrs:{options:t.categories},model:{value:t.selectedCategory,callback:function(e){t.selectedCategory=e},expression:"selectedCategory"}}),n("fancy-input",{staticClass:"thread_meta_info__title",attrs:{placeholder:"Thread title",error:t.errors.name,large:"true",width:"15rem"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t.showPoll?t._e():n("button",{staticClass:"thread_meta_info__add_poll button button--thin_text",on:{click:function(e){return t.togglePoll(!0)}}},[t._v("Add poll")])],1),n("transition",{attrs:{name:"slide"}},[t.showPoll?n("div",{staticClass:"thread_meta_info__poll"},[n("div",{staticClass:"thread_meta_info__poll__top_bar"},[n("fancy-input",{staticClass:"thread_meta_info__poll__question",attrs:{placeholder:"Poll question",width:"20rem",large:!0,error:t.errors.pollQuestion},model:{value:t.pollQuestion,callback:function(e){t.pollQuestion=e},expression:"pollQuestion"}}),n("button",{staticClass:"button button--thin_text button--borderless",on:{click:t.removePoll}},[t._v(" Remove poll ")])],1),n("div",[t._l(t.pollAnswers,(function(e,o){return n("div",{key:"poll-answer-"+o,staticClass:"thread_meta_info__poll__answer"},[n("fancy-input",{attrs:{width:"15rem",large:!0,placeholder:"Answer "+(o+1)},model:{value:e.answer,callback:function(n){t.$set(e,"answer",n)},expression:"pollAnswer.answer"}}),n("span",{attrs:{title:"Remove answer"},on:{click:function(e){return t.removePollAnswer(o)}}},[t._v("×")])],1)})),n("div",{staticClass:"thread_meta_info__form"},[n("fancy-input",{staticStyle:{display:"inline-block","margin-right":"0.5rem"},attrs:{placeholder:"Option/answer for poll",width:"15rem",large:!0,error:t.errors.pollAnswer},model:{value:t.newPollAnswer,callback:function(e){t.newPollAnswer=e},expression:"newPollAnswer"}}),n("button",{staticClass:"button button--thin_text",on:{click:t.addPollAnswer}},[t._v("Add answer")])],1)],2)]):t._e()])],1),n("div",{staticClass:"editor",class:{"editor--focus":t.focusInput,"editor--error":t.errors.content}},[n("div",{staticClass:"editor__input"},[n("div",{staticClass:"editor__format_bar editor__format_bar--editor"},[t._v(" editor ")]),n("input-editor-core",{on:{mentions:t.setMentions,focus:function(e){return t.setFocusInput(!0)},blur:function(e){return t.setFocusInput(!1)}},model:{value:t.editor,callback:function(e){t.editor=e},expression:"editor"}})],1),n("div",{staticClass:"editor__preview"},[n("div",{staticClass:"editor__format_bar editor__format_bar--preview"},[t._v(" preview ")]),n("input-editor-preview",{attrs:{value:t.editor,mentions:t.mentions}})],1)]),n("error-tooltip",{staticClass:"editor_error",attrs:{error:t.errors.content}}),n("loading-button",{staticClass:"button--green submit",attrs:{loading:t.loading},on:{click:t.postThread}},[t._v("Post thread")])],1)},r=[],i=(n("99af"),n("4160"),n("d81d"),n("a434"),n("b0c0"),n("d3b7"),n("6062"),n("3ca3"),n("498a"),n("159b"),n("ddb0"),n("87e6")),s=n("b422"),a=n("80e3"),l=n("5016"),c=n("8e8d"),u=n("e145"),d=n("c4b0"),f=n.n(d),p=n("bd28"),h={name:"ThreadNew",components:{InputEditorCore:i["a"],InputEditorPreview:s["a"],SelectButton:l["a"],FancyInput:a["a"],LoadingButton:c["a"],ErrorTooltip:u["a"]},data:function(){return{selectedCategory:this.$store.state.category.selectedCategory,editor:"",mentions:[],name:"",loading:!1,focusInput:!1,errors:{content:"",name:"",pollQuestion:"",pollAnswer:""},showPoll:!1,pollQuestion:"",newPollAnswer:"",pollAnswers:[]}},computed:{categories:function(){return this.$store.getters.categoriesWithoutAll}},methods:{togglePoll:function(t){this.showPoll=void 0!==t?t:!this.showPoll},addPollAnswer:function(){this.newPollAnswer.trim().length&&(this.pollAnswers.push({answer:this.newPollAnswer}),this.newPollAnswer="")},removePollAnswer:function(t){this.pollAnswers.splice(t,1)},removePoll:function(){this.pollQuestion="",this.pollAnswers=[],this.newPollAnswer="",this.togglePoll()},setErrors:function(t){var e=this;t.forEach((function(t){e.errors[t.name]=t.error}))},clearErrors:function(){this.errors.content="",this.errors.name="",this.errors.pollQuestion="",this.errors.pollAnswer=""},hasDuplicates:function(t,e){return e&&(t=t.map(e)),t.length!==new Set(t).size},postThread:function(){var t,e=this,n=[];this.clearErrors(),this.editor.trim().length||n.push({name:"content",error:"Post content cannot be blank"}),this.name.trim().length||n.push({name:"name",error:"Cannot be blank"}),this.showPoll&&!this.pollQuestion.trim().length&&n.push({name:"pollQuestion",error:"Cannot be blank"}),this.showPoll&&this.pollAnswers.length<2&&n.push({name:"pollAnswer",error:"You need at least 2 answers"}),this.showPoll&&this.hasDuplicates(this.pollAnswers,(function(t){return t.answer}))&&n.push({name:"pollAnswer",error:"Your answers can't contain any duplicates"}),n.length?this.setErrors(n):(this.loading=!0,this.axios.post("/api/v1/thread",{name:this.name,category:this.selectedCategory}).then((function(n){t=n.data;var o=[];return o.push(e.axios.post("/api/v1/post",{threadId:n.data.id,content:e.editor,mentions:e.mentions})),e.showPoll&&o.push(e.axios.post("/api/v1/poll",{question:e.pollQuestion,answers:e.pollAnswers.map((function(t){return t.answer})),threadId:n.data.id})),Promise.all(o)})).then((function(){e.loading=!1,e.$router.push("/thread/".concat(t.slug,"/").concat(t.id,"/0"))}))["catch"]((function(t){e.loading=!1,f()(e.$store)(t,(function(t,n){var o=t.path;void 0!==e.errors[o]?e.errors[o]=t.message:n.push(t.message)}))})))},setFocusInput:function(t){this.focusInput=t},setMentions:function(t){this.mentions=t}},watch:{"$store.state.username":function(t){t||this.$router.push("/")}},mounted:function(){this.$store.dispatch("setTitle","new thread"),Object(p["a"])("threadNew")},beforeRouteEnter:function(t,e,n){n((function(t){t.$store.state.username||(t.$store.commit("setAccountModalState",!0),n("/"))}))}},v=h,_=(n("f144"),n("2877")),m=Object(_["a"])(v,o,r,!1,null,null,null);e["default"]=m.exports},f144:function(t,e,n){"use strict";var o=n("abf8"),r=n.n(o);r.a},f183:function(t,e,n){var o=n("d012"),r=n("861d"),i=n("5135"),s=n("9bf2").f,a=n("90e3"),l=n("bb2f"),c=a("meta"),u=0,d=Object.isExtensible||function(){return!0},f=function(t){s(t,c,{value:{objectID:"O"+ ++u,weakData:{}}})},p=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,c)){if(!d(t))return"F";if(!e)return"E";f(t)}return t[c].objectID},h=function(t,e){if(!i(t,c)){if(!d(t))return!0;if(!e)return!1;f(t)}return t[c].weakData},v=function(t){return l&&_.REQUIRED&&d(t)&&!i(t,c)&&f(t),t},_=t.exports={REQUIRED:!1,fastKey:p,getWeakData:h,onFreeze:v};o[c]=!0},f83a:function(t,e,n){"use strict";var o=n("b9dc"),r=n.n(o);r.a}}]);
//# sourceMappingURL=chunk-2d64e50d.c570a793.js.map