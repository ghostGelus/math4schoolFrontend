(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b0af801"],{"2fa3":function(t,o,s){"use strict";s.d(o,"a",(function(){return a}));var n="";n="https://math4school.herokuapp.com";var a=n},"4e07":function(t,o,s){},5326:function(t,o,s){},"5da9":function(t,o,s){},6307:function(t,o,s){"use strict";var n=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"modal_window__overlay",class:{"modal_window--show":t.value},on:{click:function(o){return o.target!==o.currentTarget?null:t.closeModal(o)}}},[s("div",{staticClass:"modal_window",class:{"modal_window--show":t.value},style:{width:t.width||"20rem"}},[s("div",{staticClass:"modal_window__loading_overlay",class:{"modal_window__loading_overlay--show":t.loading}},[s("loading-icon")],1),t.closeButton?s("span",{staticClass:"modal_window__close",on:{click:t.closeModal}},[s("font-awesome-icon",{attrs:{icon:["fa","times"]}})],1):t._e(),s("div",{staticClass:"modal_window__main",class:{"modal_window__main--no_padding":t.noPadding}},[t._t("main")],2),t.hideFooter?t._e():s("div",{staticClass:"modal_window__footer"},[t._t("footer")],2)])])},a=[],e=s("c5af"),i={name:"ModalWindow",props:["value","width","close-button","hide-footer","no-padding","loading"],components:{LoadingIcon:e["a"]},methods:{closeModal:function(){this.$emit("input",!1)}}},r=i,c=(s("f83a"),s("2877")),u=Object(c["a"])(r,n,a,!1,null,"32ecccd0",null);o["a"]=u.exports},6319:function(t,o,s){},"70b1":function(t,o,s){"use strict";var n=s("6319"),a=s.n(n);a.a},"7db0":function(t,o,s){"use strict";var n=s("23e7"),a=s("b727").find,e=s("44d2"),i=s("ae40"),r="find",c=!0,u=i(r);r in[]&&Array(1)[r]((function(){c=!1})),n({target:"Array",proto:!0,forced:c||!u},{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),e(r)},"8df7":function(t,o,s){"use strict";var n=s("4e07"),a=s.n(n);a.a},"8e8d":function(t,o,s){"use strict";var n=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("button",{staticClass:"button loading_button",class:{"loading_button--loading":t.loading},on:{click:function(o){return t.event("click")},keydown:function(o){return t.event("keydown")}}},[s("loading-icon",{staticClass:"loading_button__icon",attrs:{dark:t.dark}}),s("div",{staticClass:"loading_button__slot"},[t._t("default")],2)],1)},a=[],e=s("c5af"),i={name:"LoadingButton",props:["loading","dark"],components:{LoadingIcon:e["a"]},methods:{event:function(t){this.loading||this.$emit(t)}}},r=i,c=(s("8df7"),s("2877")),u=Object(c["a"])(r,n,a,!1,null,null,null);o["a"]=u.exports},9832:function(t,o,s){"use strict";var n=s("5326"),a=s.n(n);a.a},b9dc:function(t,o,s){},c5af:function(t,o,s){"use strict";var n=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"loading_icon",class:{"loading_icon--dark":t.dark}},[s("span"),s("span"),s("span")])},a=[],e={name:"LoadingIcon",props:["dark"]},i=e,r=(s("9832"),s("2877")),c=Object(r["a"])(i,n,a,!1,null,null,null);o["a"]=c.exports},d580:function(t,o,s){"use strict";s.r(o);var n=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",[s("admin-nav"),s("div",{staticClass:"admin"},[s("div",{staticClass:"admin__menu"},t._l(t.routes,(function(o){return s("div",{key:o.path,staticClass:"admin__menu__item",class:{"admin__menu__item--selected":o.route.includes(t.selected)},on:{click:function(s){return t.$router.push("/admin/"+o.route)}}},[s("div",[s("font-awesome-icon",{staticClass:"admin__menu__item__icon",attrs:{icon:["fa",o.icon]}})],1),s("div",[s("div",{staticClass:"admin__menu__item__title"},[t._v(" "+t._s(o.title)+" ")]),s("div",{staticClass:"admin__menu__item__description"},[t._v(" "+t._s(o.description)+" ")])])])})),0),s("router-view",{staticClass:"admin__router_view"})],1)],1)},a=[],e=(s("ac1f"),s("1276"),function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{attrs:{id:"admin"}},[s("modal-window",{staticStyle:{"z-index":"100"},attrs:{width:"25rem","no-padding":!0},model:{value:t.showAjaxErrorsModal,callback:function(o){t.showAjaxErrorsModal=o},expression:"showAjaxErrorsModal"}},[s("div",{attrs:{slot:"main"},slot:"main"},t._l(this.$store.state.ajaxErrors,(function(o){return s("p",{key:o,staticStyle:{margin:"1rem"}},[t._v(" "+t._s(o)+" ")])})),0),s("button",{ref:"ajaxErrorsModalButton",staticClass:"button button--modal",attrs:{slot:"footer"},on:{click:function(o){t.showAjaxErrorsModal=!1}},slot:"footer"},[t._v(" OK ")])]),s("header",{staticClass:"header"},[s("div",{staticClass:"header__group"},[s("router-link",{staticClass:"logo",attrs:{to:"/"}})],1),s("div",{staticClass:"header__group",class:{"header__group--show":t.showMenu}},[t.$store.state.username?[t.$store.state.admin?s("router-link",{staticClass:"button button--thin_text",attrs:{to:"/admin"}},[t._v(" Панель администратора ")]):t._e(),s("loading-button",{staticClass:"button--thin_text",attrs:{loading:t.loadingLogout},on:{click:t.logout}},[t._v(" Выход ")])]:t._e()],2),s("div",{staticClass:"header__overlay",class:{"header__overlay--show":t.showMenu},on:{click:t.toggleMenu}}),s("span",{staticClass:"header__menu_button",on:{click:t.toggleMenu}},[s("font-awesome-icon",{attrs:{icon:["fa","bars"]}})],1)]),s("not-found",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.show404Page,expression:"$store.state.show404Page"}]})],1)}),i=[],r=(s("7db0"),s("b0c0"),s("498a"),s("6307")),c=s("8e8d"),u=s("1b9a"),l=s("c4b0"),d=s.n(l),h=s("2fa3"),m={name:"app",components:{ModalWindow:r["a"],LoadingButton:c["a"],NotFound:u["a"]},data:function(){return{signup:{username:"",password:"",confirmPassword:"",loading:!1,errors:{username:"",hash:"",confirmPassword:""}},login:{username:"",password:"",loading:!1,errors:{username:"",hash:""}},loadingLogout:!1,showMenu:!0,ajaxErrorHandler:d()(this.$store)}},computed:{name:function(){return this.$store.state.meta.name},showAccountModal:{get:function(){return this.$store.state.accountModal},set:function(t){this.$store.commit("setAccountModalState",t)}},showAjaxErrorsModal:{get:function(){return this.$store.state.ajaxErrorsModal},set:function(t){this.$store.commit("setAjaxErrorsModalState",t)}},showAccountTab:{get:function(){return this.$store.state.accountTabs},set:function(t){this.$store.commit("setAccountTabs",t)}},categories:function(){return this.$store.state.meta.categories}},methods:{showAccountModalTab:function(t){this.toggleMenu(),this.showAccountModal=!0,this.showAccountTab=t},toggleMenu:function(){this.showMenu=!this.showMenu},logout:function(){var t=this;this.toggleMenu(),this.loadingLogout=!0,this.axios.post(h["a"]+"/api/v1/user/"+this.$store.state.username+"/logout").then((function(o){t.loadingLogout=!1,t.$store.commit("setUsername",""),t.$store.commit("setAdmin",o.data.admin),t.$router.push("/")}))["catch"]((function(o){t.loadingLogout=!1,t.ajaxErrorHandler(o)}))},clearSignup:function(){this.signup.username="",this.signup.password="",this.signup.confirmPassword="",this.$store.commit("setToken",null)},clearSignupErrors:function(){this.signup.errors.username="",this.signup.errors.hash="",this.signup.errors.confirmPassword=""},clearLogin:function(){this.login.username="",this.login.password=""},clearLoginErrors:function(){this.login.errors.username="",this.login.errors.hash=""},closeAccountModal:function(){this.showAccountModal=!1,this.clearLogin(),this.clearSignup(),this.clearLoginErrors(),this.clearSignupErrors()},createAccount:function(){var t=this;this.clearSignupErrors();var o={username:this.signup.username,password:this.signup.password};this.$store.state.token&&(o.admin=!0,o.token=this.$store.state.token),this.signup.password!==this.signup.confirmPassword?this.signup.errors.confirmPassword="Passwords must match":(this.signup.loading=!0,this.axios.post(h["a"]+"/api/v1/user",o).then((function(o){t.signup.loading=!1,t.$store.commit("setUsername",o.data.username),t.$store.commit("setAdmin",o.data.admin),t.closeAccountModal()}))["catch"]((function(o){t.signup.loading=!1,t.ajaxErrorHandler(o,(function(o){var s=o.path;void 0!==t.signup.errors[s]&&void 0!==t.signup.errors[s]&&(t.signup.errors[s]=o.message)}))})))},doLogin:function(){var t=this;this.clearSignupErrors(),this.login.username.trim().length?(this.login.loading=!0,this.axios.post(h["a"]+"/api/v1/user/".concat(this.login.username,"/login"),{password:this.login.password}).then((function(o){t.login.loading=!1,t.$store.commit("setUsername",o.data.username),t.$store.commit("setAdmin",o.data.admin),t.closeAccountModal(),t.$router.push("/admin/contacts")}))["catch"]((function(o){t.login.loading=!1,t.ajaxErrorHandler(o,(function(o){var s=o.path;void 0!==t.signup.errors[s]&&void 0!==t.signup.errors[s]&&(t.signup.errors[s]=o.message)}))}))):this.login.errors.username="Username must not be blank"}},created:function(){var t=this;this.axios.get(h["a"]+"/api/v1/settings").then((function(o){t.$store.commit("setSettings",o.data),t.$store.dispatch("setTitle",t.$store.state.meta.title)}))["catch"]((function(o){t.ajaxErrorHandler(o)})),this.axios.get(h["a"]+"/api/v1/category").then((function(o){if(t.$store.commit("addCategories",o.data),!t.$store.state.meta.title.length&&t.$route.params.category){var s=t.$route.params.category.toUpperCase(),n=t.categories.find((function(t){return t.value===s}));t.$store.dispatch("setTitle",n.name)}}))["catch"](this.ajaxErrorHandler)},watch:{$route:function(){this.showMenu=!1},"$store.state.ajaxErrorsModal":function(t){t&&this.$refs.ajaxErrorsModalButton.focus()}}},g=m,f=(s("efa9"),s("2877")),_=Object(f["a"])(g,e,i,!1,null,null,null),p=_.exports,w={name:"Admin",components:{AdminNav:p},data:function(){return{selected:null,routes:[{title:"Обратная связь",route:"contacts",description:"Сообщения оставленные в контактной форме",icon:"home"},{title:"Пользователи",route:"users",description:"Пользователи в системе",icon:"user-circle"}]}},watch:{$route:function(t){this.selected=t.path.split("/")[2]}},created:function(){var t=this;this.selected=this.$route.path.split("/")[2],this.$nextTick((function(){t.$store.state.admin||(t.$router.push("/"),t.$store.commit("setAccountTabs",1),t.$store.commit("setAccountModalState",!0))}))}},v=w,$=(s("70b1"),Object(f["a"])(v,n,a,!1,null,"614e36a2",null));o["default"]=$.exports},efa9:function(t,o,s){"use strict";var n=s("5da9"),a=s.n(n);a.a},f83a:function(t,o,s){"use strict";var n=s("b9dc"),a=s.n(n);a.a}}]);
//# sourceMappingURL=chunk-1b0af801.4bad337a.js.map